# 文件大小压缩工具

这是一个在线文件压缩工具，支持压缩 PDF、JPG/JPEG 和 PNG 文件，帮助您减小文件大小，方便存储和分享。

## 功能特性

-   **支持文件类型：** 支持 PDF (`.pdf`)、JPG/JPEG (`.jpg`, `.jpeg`) 和 PNG (`.png`) 格式的文件。
-   **文件上传：** 支持通过点击按钮选择文件或直接将文件拖拽到指定区域进行上传。
-   **图片压缩选项：** 对于 JPG/JPEG 和 PNG 图片，提供以下压缩选项：
    *   **推荐 (平衡)：** 在文件大小和图片质量之间取得平衡。
    *   **高质量 (文件稍大)：** 尽可能保留图片质量，压缩率相对较低。
    *   **高压缩 (文件较小)：** 以牺牲部分图片质量为代价，获得更高的压缩率。
-   **PDF 压缩：** PDF 文件通过后端服务进行压缩，采用标准压缩设置。
-   **结果展示：** 显示每个文件的原始大小、压缩后大小、压缩率以及处理状态（等待中、压缩中、上传中、处理中、完成、失败）。
-   **文件下载：** 压缩完成后，提供单个文件的下载链接。

## 使用方法

1.  打开文件压缩工具页面。
2.  点击“选择文件”按钮或将您想要压缩的 PDF、JPG/JPEG 或 PNG 文件拖拽到上传区域。
3.  对于图片文件，您可以选择“推荐”、“高质量”或“高压缩”作为图片压缩选项。PDF 文件将使用默认设置进行压缩。
4.  点击“开始压缩全部”按钮。
5.  工具将开始处理文件，您可以在结果区域查看每个文件的处理状态。
6.  文件处理完成后，您将看到压缩后的文件大小和压缩率，并可以点击下载链接保存文件。

## 技术说明 (面向部署者)

本文件压缩工具采用混合压缩模式：
-   **图片压缩：** 在用户浏览器前端使用 `browser-image-compression` 库进行处理。
-   **PDF 压缩：** 将 PDF 文件上传到后端 API (`/api/compress-pdf`) 进行处理。

**PDF 压缩依赖：**

PDF 压缩功能依赖于服务器环境安装 [Ghostscript](https://www.ghostscript.com/) 命令行工具。请确保您的服务器上已安装 Ghostscript 并且其可执行文件路径已添加到系统的 PATH 环境变量中，或者在后端代码中指定 Ghostscript 的完整路径。

后端 API (`/api/compress-pdf`) 使用 Node.js 的 `child_process` 模块调用 Ghostscript 命令进行 PDF 压缩。默认使用的 Ghostscript 参数为 `-dPDFSETTINGS=/ebook`，这是一个在文件大小和质量之间取得良好平衡的设置。

## 待办与优化 (可选)

-   [ ] 增加对更多文件类型的支持（如 Word, Excel 等）。
-   [ ] 实现批量下载功能（例如打包成 ZIP 文件）。
-   [ ] 优化大文件处理的性能和稳定性。
-   [ ] 增加更详细的错误提示和用户指导。
-   [ ] 考虑增加 PDF 压缩选项（如更高压缩率或更高质量）。